<%= form_with(model: [sub_agent.document || @document, sub_agent], local: true) do |form| %>
  <% if sub_agent.errors.any? %>
    <div class="alert alert-danger mb-4">
      <h4 class="font-bold"><%= pluralize(sub_agent.errors.count, "error") %> prohibited this sub-agent from being saved:</h4>
      <ul class="list-disc list-inside mt-2">
        <% sub_agent.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="space-y-4">
    <div>
      <%= form.label :name, class: "block font-medium mb-1" %>
      <%= form.text_field :name, class: "form-input w-full" %>
    </div>

    <div>
      <%= form.label :agent_type, class: "block font-medium mb-1" %>
      <%= form.select :agent_type, options_for_select([
        ['Rails/Ruby Expert', 'ruby-rails-expert'],
        ['JavaScript Expert', 'javascript-package-expert'],
        ['Tailwind CSS Expert', 'tailwind-css-expert'],
        ['Test Runner', 'test-runner-fixer'],
        ['Error Debugger', 'error-debugger'],
        ['Project Orchestrator', 'project-orchestrator'],
        ['Git Auto-Commit', 'git-auto-commit'],
        ['Custom', 'custom']
      ], sub_agent.agent_type), {}, class: "form-select w-full" %>
    </div>

    <div class="flex justify-end">
      <%= form.submit class: "btn btn-primary" %>
    </div>
  </div>
<% end %>