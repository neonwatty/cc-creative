# Task ID: 15
# Title: Implement Analytics and Monitoring
# Status: pending
# Dependencies: 1, 3
# Priority: low
# Description: Set up analytics tracking, error monitoring, and performance metrics to understand user behavior and application health.
# Details:
1. Implement application monitoring with Sentry:
   ```ruby
   # Gemfile
   gem 'sentry-ruby'
   gem 'sentry-rails'

   # config/initializers/sentry.rb
   Sentry.init do |config|
     config.dsn = Rails.application.credentials.sentry[:dsn]
     config.breadcrumbs_logger = [:active_support_logger, :http_logger]
     config.traces_sample_rate = 0.5
   end
   ```
2. Set up performance monitoring with Skylight:
   ```ruby
   # Gemfile
   gem 'skylight'

   # config/skylight.yml
   ---
   authentication: <%= Rails.application.credentials.skylight[:authentication] %>
   ```
3. Implement user analytics with Ahoy:
   ```ruby
   # Gemfile
   gem 'ahoy_matey'

   # app/models/ahoy/event.rb
   module Ahoy
     class Event < ApplicationRecord
       include Ahoy::QueryMethods

       self.table_name = 'ahoy_events'

       belongs_to :visit
       belongs_to :user, optional: true
     end
   end
   ```
4. Create custom event tracking for key user actions
5. Set up health check endpoints
6. Implement logging enhancements
7. Create admin dashboard for analytics
8. Set up alerting for critical errors

# Test Strategy:
1. Verify error tracking captures exceptions correctly
2. Test performance monitoring data collection
3. Verify user analytics events are tracked correctly
4. Test health check endpoints
5. Verify logging captures important information
6. Test admin dashboard functionality
7. Ensure alerting works for critical errors
